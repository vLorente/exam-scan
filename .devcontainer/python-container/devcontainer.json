{
  "name": "FastAPI Backend DevContainer",
  "dockerComposeFile": [
    "../docker-compose.devcontainer.yml"
  ],
  "service": "backend",
  "workspaceFolder": "/app/backend",
  // Monta el proyecto completo en el contenedor
// Especifica el usuario no-root que creaste
  "remoteUser": "pythonuser",
  "remoteEnv": {
    "PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
  },
  "mounts": [
    {
        "source": "${localWorkspaceFolder}",
        "target": "/app",
        "type": "bind"
    }
    // "source=${localWorkspaceFolder},target=/app,type=bind,consistency=cached"
  ],
  "customizations": {
    "vscode": {
       "extensions": [
                "ms-python.python",
                "ms-python.vscode-pylance",
                "mtxr.sqltools",
                "mtxr.sqltools-driver-pg",
                "GitHub.copilot",
                "github.vscode-pull-request-github",
                "ms-vscode.live-server",
                "meta.pyrefly",
                "humao.rest-client",
                "ms-ossdata.vscode-pgsql",
                "yzhang.markdown-all-in-one"
            ],
      "settings": {
        "python.analysis.autoImportCompletions": true,
        "ruff.args": ["--line-length", "120"],
        "workbench.colorTheme": "Default Dark+",
        "python.languageServer": "Pylance",
        "python.linting.enabled": true,
        "python.linting.mypyEnabled": true,
        "python.testing.pytestEnabled": true,
        "python.formatting.provider": "black",
        "python.formatting.blackArgs": [
            "--line-length=88"
        ],
        "sqltools.connections": [
            {
                "name": "PostgreSQL (devcontainer)",
                "driver": "PostgreSQL",
                "server": "postgres",
                "port": 5432,
                "database": "exams",
                "username": "app_user",
                "password": "app_password"
            }
        ]
      }
    }
  },
  
//   "postCreateCommand": "uv sync",
  
  "forwardPorts": [8000],
  
  "portsAttributes": {
    "8000": {
      "label": "FastAPI",
      "onAutoForward": "notify"
    }
  }
}